#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from main.services import normalize_phone_number

def test_phone_normalization():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤"""
    
    test_cases = [
        # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
        ("+77712641298", "+77712641298"),
        # –° 8 –≤–º–µ—Å—Ç–æ +7
        ("87712641298", "+77712641298"),
        # –ë–µ–∑ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã
        ("77712641298", "+77712641298"),
        # –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏ —Å–∫–æ–±–∫–∞–º–∏
        ("+7 771 264 12 98", "+77712641298"),
        ("8 (771) 264-12-98", "+77712641298"),
        # –° –¥–µ—Ñ–∏—Å–∞–º–∏
        ("+7-771-264-12-98", "+77712641298"),
        # –° –ø—Ä–æ–±–µ–ª–∞–º–∏
        ("+7 771 264 12 98", "+77712641298"),
        # –ö–æ—Ä–æ—Ç–∫–∏–π –Ω–æ–º–µ—Ä (–Ω–µ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è)
        ("7712641298", "7712641298"),
        # –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–Ω–µ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è)
        ("123456789", "123456789"),
    ]
    
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤")
    print("=" * 50)
    
    all_passed = True
    
    for input_phone, expected_output in test_cases:
        result = normalize_phone_number(input_phone)
        status = "‚úÖ" if result == expected_output else "‚ùå"
        
        print(f"{status} –í—Ö–æ–¥: {input_phone:20} -> –í—ã—Ö–æ–¥: {result:15} (–æ–∂–∏–¥–∞–ª–æ—Å—å: {expected_output})")
        
        if result != expected_output:
            all_passed = False
    
    print("=" * 50)
    if all_passed:
        print("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!")
    else:
        print("üí• –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏!")
    
    return all_passed

if __name__ == "__main__":
    test_phone_normalization()
